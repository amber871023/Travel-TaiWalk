(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ea69c8c"],{"03ee":function(t,e,c){t.exports=c.p+"img/agriculture.c4eb9534.png"},"18b1":function(t,e,c){t.exports=c.p+"img/natural.66cbba0d.png"},"7a49":function(t,e,c){"use strict";c.r(e);c("b0c0"),c("ac1f"),c("841c");var a=c("7a23"),i={class:"container mb-7"},s={"aria-label":"breadcrumb"},n={class:"breadcrumb"},o={class:"breadcrumb-item"},r=Object(a["i"])("首頁"),l=Object(a["g"])("li",{class:"breadcrumb-item active","aria-current":"page"},"探索景點",-1),p={class:"container mb-8"},u={class:"row flex-row justify-content-center g-1"},b={class:"col-12 col-md-3"},m=Object(a["g"])("option",{value:"",selected:""},"全部縣市",-1),g=["value"],d={class:"col-12 col-md-3"},h=Object(a["g"])("option",{value:"",selected:""},"全部主題",-1),f=["value"],j={class:"col-12 col-md-4"},O={class:"col-12 col-md-2"},y=Object(a["g"])("span",{class:"material-icons text-white pe-3"}," search ",-1),v=Object(a["i"])(" 搜 尋"),w=[y,v],k={key:0,class:"container"},C={class:"row"},L=Object(a["g"])("div",{class:"col-12 fs-7"},"熱門主題",-1),S=["onClick"],x={class:"imgWrap",style:{cursor:"pointer"}},T={class:"imgCard overflow-hidden",style:{"border-radius":"30px"}},P=["src","alt"],N={class:"position-absolute top-50 start-50 translate-middle text-white fw-bold fs-4"};function $(t,e,c,y,v,$){var z=Object(a["A"])("router-link"),U=Object(a["A"])("SearchResult");return Object(a["t"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("section",i,[Object(a["g"])("nav",s,[Object(a["g"])("ol",n,[Object(a["g"])("li",o,[Object(a["j"])(z,{to:"/"},{default:Object(a["H"])((function(){return[r]})),_:1})]),l])])]),Object(a["g"])("section",p,[Object(a["g"])("div",u,[Object(a["g"])("div",b,[Object(a["I"])(Object(a["g"])("select",{class:"form-select me-3","onUpdate:modelValue":e[0]||(e[0]=function(t){return v.param.city=t})},[m,(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(v.CityList,(function(t,e){return Object(a["t"])(),Object(a["f"])("option",{key:e,value:t.City},Object(a["C"])(t.CityName),9,g)})),128))],512),[[a["E"],v.param.city]])]),Object(a["g"])("div",d,[Object(a["I"])(Object(a["g"])("select",{class:"form-select me-3","onUpdate:modelValue":e[1]||(e[1]=function(t){return v.param.type=t})},[h,(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(v.types,(function(t,e){return Object(a["t"])(),Object(a["f"])("option",{key:e,value:t.name},Object(a["C"])(t.name),9,f)})),128))],512),[[a["E"],v.param.type]])]),Object(a["g"])("div",j,[Object(a["I"])(Object(a["g"])("input",{class:"form-control me-3",type:"text",placeholder:"你想去哪裡？請輸入關鍵字","onUpdate:modelValue":e[2]||(e[2]=function(t){return v.param.keyword=t})},null,512),[[a["F"],v.param.keyword]])]),Object(a["g"])("div",O,[Object(a["g"])("button",{type:"button",class:"btn btn-primary w-100 text-white d-flex justify-content-center",onClick:e[3]||(e[3]=function(){return $.search&&$.search.apply($,arguments)})},w)])])]),v.isSearched?(Object(a["t"])(),Object(a["d"])(U,{key:1,list:v.resultList,totalList:v.totalList,pages:v.pages,routeName:"spot",onFilterList:$.renderList},null,8,["list","totalList","pages","onFilterList"])):(Object(a["t"])(),Object(a["f"])("section",k,[Object(a["g"])("div",C,[L,(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(v.types,(function(t,e){return Object(a["t"])(),Object(a["f"])("div",{class:"col-6 col-md-4 col-lg-3 position-relative mb-2",key:e,onClick:function(e){return $.searchType(t)}},[Object(a["g"])("div",x,[Object(a["g"])("div",T,[Object(a["g"])("img",{src:t.img,class:"card-img-top",alt:t.name,style:{height:"100%",width:"100%"}},null,8,P),Object(a["g"])("h3",N,Object(a["C"])(t.name),1)])])],8,S)})),128))])]))],64)}c("99af"),c("d3b7"),c("159b");var z=c("c119"),U=c("78db"),E={components:{SearchResult:U["a"]},data:function(){return{CityList:[],param:{city:"",type:"",keyword:null},types:[{name:"自然風景類",img:c("18b1")},{name:"觀光工廠類",img:c("c347")},{name:"遊憩類",img:c("c8f6")},{name:"休閒農業類",img:c("03ee")},{name:"生態類",img:c("8599")},{name:"溫泉類",img:c("7f32")},{name:"古蹟類",img:c("b420")}],isSearched:!1,resultList:[],totalList:[],pages:{pageSize:20,pageTotal:0,currentPage:1}}},methods:{getCity:function(){var t=this,e="https://gist.motc.gov.tw/gist_api/V3/Map/Basic/City?$format=JSON";this.$http.get(e,{headers:Object(z["a"])()}).then((function(e){t.CityList=e.data})).catch((function(t){console.log(t)}))},querySearch:function(){var t=this.$route.query.keyword;t&&(this.param.keyword=t,this.search())},searchType:function(t){this.param.type=t.name,this.search()},search:function(){var t=this,e="";this.param.keyword&&this.param.type?e="%24filter=contains(ScenicSpotName, '".concat(this.param.keyword,"')and (contains(Class1, '").concat(this.param.type,"')or contains(Class2, '").concat(this.param.type,"')or contains(Class3, '").concat(this.param.type,"'))"):(this.param.keyword&&(e="%24filter=contains(ScenicSpotName, '".concat(this.param.keyword,"')")),this.param.type&&(e="%24filter=contains(Class1, '".concat(this.param.type,"')or contains(Class2, '").concat(this.param.type,"')or contains(Class3, '").concat(this.param.type,"')")));var a="".concat("https://ptx.transportdata.tw/MOTC/v2","/Tourism/ScenicSpot/").concat(this.param.city,"?").concat(e,"&%24format=JSON");this.$http.get(a,{headers:Object(z["a"])()}).then((function(e){e.data.forEach((function(t){void 0===t.Picture.PictureUrl1&&(t.Picture.PictureUrl1=c("2de0"))})),t.totalList=e.data;var a=t.totalList.length;t.pages.pageTotal=Math.ceil(a/t.pages.pageSize),t.renderList(),t.isSearched=!0,t.param.keyword=null})).catch((function(t){console.log(t)}))},renderList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.resultList=[],this.pages.currentPage=a,this.totalList.forEach((function(a,i){var s=i+1;s>=e&&s<=c&&t.resultList.push(a)})),this.pages.currentPage>this.pages.pageTotal&&(this.pages.currentPage=this.pageTotal),window.scrollTo(0,0)}},watch:{$route:function(){"spots"===this.$route.name&&this.search()}},mounted:function(){this.getCity(),this.querySearch()}},J=c("6b0d"),V=c.n(J);const q=V()(E,[["render",$]]);e["default"]=q},"7f32":function(t,e,c){t.exports=c.p+"img/spa.0978b7b6.png"},8599:function(t,e,c){t.exports=c.p+"img/ecological.c80ac5b5.png"},b420:function(t,e,c){t.exports=c.p+"img/historic.5cf08d22.png"},c347:function(t,e,c){t.exports=c.p+"img/recreation.b11dceef.png"},c8f6:function(t,e,c){t.exports=c.p+"img/play.c2430091.png"}}]);
//# sourceMappingURL=chunk-7ea69c8c.a21dcf36.js.map