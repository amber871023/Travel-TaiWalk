(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-197b3b38"],{"00ad":function(t,e,a){t.exports=a.p+"img/annual.8454a0f9.png"},"1cbe":function(t,e,a){t.exports=a.p+"img/culture.62bbe56a.png"},"9c62":function(t,e,a){t.exports=a.p+"img/play.4a03b9f2.png"},a425:function(t,e,a){t.exports=a.p+"img/festival.466f5622.png"},aa9c:function(t,e,a){"use strict";a.r(e);a("b0c0"),a("ac1f"),a("841c");var c=a("7a23"),i={class:"container mb-7"},s={"aria-label":"breadcrumb"},n={class:"breadcrumb"},r={class:"breadcrumb-item"},o=Object(c["i"])("首頁"),l=Object(c["g"])("li",{class:"breadcrumb-item active","aria-current":"page"},"節慶活動",-1),p={class:"container mb-8"},u={class:"row flex-row justify-content-center g-1"},b={class:"col-12 col-md-3"},m=Object(c["g"])("option",{value:"",selected:""},"全部縣市",-1),d=["value"],g={class:"col-12 col-md-3"},h=Object(c["g"])("option",{value:"",selected:""},"全部主題",-1),f=["value"],j={class:"col-12 col-md-4"},O={class:"col-12 col-md-2"},y=Object(c["g"])("span",{class:"material-icons text-white pe-3"}," search ",-1),v=Object(c["i"])(" 搜 尋"),w=[y,v],k={key:0,class:"container"},C={class:"row"},L=Object(c["g"])("div",{class:"col-12 fs-7"},"熱門主題",-1),x=["onClick"],S={class:"imgWrap",style:{cursor:"pointer"}},T={class:"imgCard overflow-hidden",style:{"border-radius":"30px"}},P=["src","alt"],N={class:"position-absolute top-50 start-50 translate-middle text-white fw-bold fs-4"};function $(t,e,a,y,v,$){var z=Object(c["A"])("router-link"),A=Object(c["A"])("SearchResult");return Object(c["t"])(),Object(c["f"])(c["a"],null,[Object(c["g"])("section",i,[Object(c["g"])("nav",s,[Object(c["g"])("ol",n,[Object(c["g"])("li",r,[Object(c["j"])(z,{to:"/"},{default:Object(c["H"])((function(){return[o]})),_:1})]),l])])]),Object(c["g"])("section",p,[Object(c["g"])("div",u,[Object(c["g"])("div",b,[Object(c["I"])(Object(c["g"])("select",{class:"form-select me-3","onUpdate:modelValue":e[0]||(e[0]=function(t){return v.param.city=t})},[m,(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(v.CityList,(function(t,e){return Object(c["t"])(),Object(c["f"])("option",{key:e,value:t.City},Object(c["C"])(t.CityName),9,d)})),128))],512),[[c["E"],v.param.city]])]),Object(c["g"])("div",g,[Object(c["I"])(Object(c["g"])("select",{class:"form-select me-3","onUpdate:modelValue":e[1]||(e[1]=function(t){return v.param.type=t})},[h,(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(v.types,(function(t,e){return Object(c["t"])(),Object(c["f"])("option",{key:e,value:t.name},Object(c["C"])(t.name),9,f)})),128))],512),[[c["E"],v.param.type]])]),Object(c["g"])("div",j,[Object(c["I"])(Object(c["g"])("input",{class:"form-control me-3",type:"text",placeholder:"你想去哪裡？請輸入關鍵字","onUpdate:modelValue":e[2]||(e[2]=function(t){return v.param.keyword=t})},null,512),[[c["F"],v.param.keyword]])]),Object(c["g"])("div",O,[Object(c["g"])("button",{type:"button",class:"btn btn-primary w-100 text-white d-flex justify-content-center",onClick:e[3]||(e[3]=function(){return $.search&&$.search.apply($,arguments)})},w)])])]),v.isSearched?(Object(c["t"])(),Object(c["d"])(A,{key:1,list:v.resultList,totalList:v.totalList,pages:v.pages,routeName:"event",onFilterList:$.renderList},null,8,["list","totalList","pages","onFilterList"])):(Object(c["t"])(),Object(c["f"])("section",k,[Object(c["g"])("div",C,[L,(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(v.types,(function(t,e){return Object(c["t"])(),Object(c["f"])("div",{class:"col-6 col-md-4 col-lg-3 position-relative mb-2",key:e,onClick:function(e){return $.searchType(t)}},[Object(c["g"])("div",S,[Object(c["g"])("div",T,[Object(c["g"])("img",{src:t.img,class:"card-img-top",alt:t.name,style:{height:"100%",width:"100%"}},null,8,P),Object(c["g"])("h3",N,Object(c["C"])(t.name),1)])])],8,x)})),128))])]))],64)}a("99af"),a("d3b7"),a("159b");var z=a("c119"),A=a("78db"),U={components:{SearchResult:A["a"]},data:function(){return{CityList:[],param:{city:"",type:"",keyword:null},types:[{name:"節慶活動",img:a("a425")},{name:"自行車活動",img:a("abf2")},{name:"遊憩類",img:a("9c62")},{name:"產業文化活動",img:a("1cbe")},{name:"年度活動",img:a("00ad")},{name:"四季活動",img:a("eeed")}],isSearched:!1,resultList:[],totalList:[],pages:{pageSize:20,pageTotal:0,currentPage:1}}},methods:{getCity:function(){var t=this,e="https://gist.motc.gov.tw/gist_api/V3/Map/Basic/City?$format=JSON";this.$http.get(e,{headers:Object(z["a"])()}).then((function(e){t.CityList=e.data})).catch((function(t){console.log(t)}))},querySearch:function(){var t=this.$route.query.keyword;t&&(this.param.keyword=t,this.search())},searchType:function(t){this.param.type=t.name,this.search()},search:function(){var t=this,e="";this.param.keyword&&this.param.type?e="%24filter=contains(ActivityName, '".concat(this.param.keyword,"')and (contains(Class1, '").concat(this.param.type,"')or contains(Class2, '").concat(this.param.type,"'))"):(this.param.keyword&&(e="%24filter=contains(ActivityName, '".concat(this.param.keyword,"')")),this.param.type&&(e="%24filter=contains(Class1, '".concat(this.param.type,"')or contains(Class2, '").concat(this.param.type,"')")));var c="".concat("https://ptx.transportdata.tw/MOTC/v2","/Tourism/Activity/").concat(this.param.city,"?").concat(e,"&%24format=JSON");this.$http.get(c,{headers:Object(z["a"])()}).then((function(e){e.data.forEach((function(t){void 0===t.Picture.PictureUrl1&&(t.Picture.PictureUrl1=a("2de0"))})),t.totalList=e.data;var c=t.totalList.length;t.pages.pageTotal=Math.ceil(c/t.pages.pageSize),t.renderList(),t.isSearched=!0,t.param.keyword=null})).catch((function(t){console.log(t)}))},renderList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.resultList=[],this.pages.currentPage=c,this.totalList.forEach((function(c,i){var s=i+1;s>=e&&s<=a&&t.resultList.push(c)})),this.pages.currentPage>this.pages.pageTotal&&(this.pages.currentPage=this.pageTotal),window.scrollTo(0,0)}},watch:{$route:function(){"spots"===this.$route.name&&this.search()}},mounted:function(){this.getCity(),this.querySearch()}},E=a("6b0d"),J=a.n(E);const V=J()(U,[["render",$]]);e["default"]=V},abf2:function(t,e,a){t.exports=a.p+"img/bike.3be0f707.png"},eeed:function(t,e,a){t.exports=a.p+"img/seasons.67588d79.png"}}]);
//# sourceMappingURL=chunk-197b3b38.6c65ab18.js.map