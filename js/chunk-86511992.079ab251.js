(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86511992"],{"4a98":function(t,e,a){t.exports=a.p+"img/vegetarian.2f67cf1e.png"},"5f7d":function(t,e,a){t.exports=a.p+"img/chinese-cuisine.ece0f6a4.png"},7024:function(t,e,a){t.exports=a.p+"img/local-specialty.12b1810d.png"},7639:function(t,e,a){t.exports=a.p+"img/dessert.8d10a4c0.png"},"9f40":function(t,e,a){t.exports=a.p+"img/exotic-cuisine.1c1827c6.png"},c670:function(t,e,a){"use strict";a.r(e);a("b0c0"),a("ac1f"),a("841c");var c=a("7a23"),i=Object(c["h"])('<section class="container mb-7"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="index.html">首頁</a></li><li class="breadcrumb-item active" aria-current="page">品嘗美食</li></ol></nav></section>',1),s={class:"container mb-8"},n={class:"row flex-row justify-content-center g-1"},r={class:"col-12 col-md-3"},o=Object(c["g"])("option",{value:"",selected:""},"全部縣市",-1),l=["value"],p={class:"col-12 col-md-3"},u=Object(c["g"])("option",{value:"",selected:""},"全部主題",-1),d=["value"],m={class:"col-12 col-md-4"},h={class:"col-12 col-md-2"},g=Object(c["g"])("span",{class:"material-icons text-white pe-3"}," search ",-1),b=Object(c["i"])(" 搜 尋"),f=[g,b],O={key:0,class:"container"},j={class:"row"},y=Object(c["g"])("div",{class:"col-12 fs-7"},"熱門主題",-1),v=["onClick"],w={class:"imgWrap",style:{cursor:"pointer"}},k={class:"imgCard overflow-hidden",style:{"border-radius":"30px"}},L=["src","alt"],C={class:"position-absolute top-50 start-50 translate-middle text-white fw-bold fs-4"};function x(t,e,a,g,b,x){var S=Object(c["A"])("SearchResult");return Object(c["t"])(),Object(c["f"])(c["a"],null,[i,Object(c["g"])("section",s,[Object(c["g"])("div",n,[Object(c["g"])("div",r,[Object(c["I"])(Object(c["g"])("select",{class:"form-select me-3","onUpdate:modelValue":e[0]||(e[0]=function(t){return b.param.city=t})},[o,(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(b.CityList,(function(t,e){return Object(c["t"])(),Object(c["f"])("option",{key:e,value:t.City},Object(c["C"])(t.CityName),9,l)})),128))],512),[[c["E"],b.param.city]])]),Object(c["g"])("div",p,[Object(c["I"])(Object(c["g"])("select",{class:"form-select me-3","onUpdate:modelValue":e[1]||(e[1]=function(t){return b.param.type=t})},[u,(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(b.types,(function(t,e){return Object(c["t"])(),Object(c["f"])("option",{key:e,value:t.name},Object(c["C"])(t.name),9,d)})),128))],512),[[c["E"],b.param.type]])]),Object(c["g"])("div",m,[Object(c["I"])(Object(c["g"])("input",{class:"form-control me-3",type:"text",placeholder:"你想去哪裡？請輸入關鍵字","onUpdate:modelValue":e[2]||(e[2]=function(t){return b.param.keyword=t})},null,512),[[c["F"],b.param.keyword]])]),Object(c["g"])("div",h,[Object(c["g"])("button",{type:"button",class:"btn btn-primary w-100 text-white d-flex justify-content-center",onClick:e[3]||(e[3]=function(){return x.search&&x.search.apply(x,arguments)})},f)])])]),b.isSearched?(Object(c["t"])(),Object(c["d"])(S,{key:1,list:b.resultList,totalList:b.totalList,pages:b.pages,routeName:"food",onFilterList:x.renderList},null,8,["list","totalList","pages","onFilterList"])):(Object(c["t"])(),Object(c["f"])("section",O,[Object(c["g"])("div",j,[y,(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(b.types,(function(t,e){return Object(c["t"])(),Object(c["f"])("div",{class:"col-6 col-md-4 col-lg-3 position-relative mb-2",key:e,onClick:function(e){return x.searchType(t)}},[Object(c["g"])("div",w,[Object(c["g"])("div",k,[Object(c["g"])("img",{src:t.img,class:"card-img-top",alt:t.name,style:{height:"100%",width:"100%"}},null,8,L),Object(c["g"])("h3",C,Object(c["C"])(t.name),1)])])],8,v)})),128))])]))],64)}a("99af"),a("d3b7"),a("159b");var S=a("c119"),T=a("78db"),P={components:{SearchResult:T["a"]},data:function(){return{CityList:[],param:{city:"",type:"",keyword:null},types:[{name:"地方特產",img:a("7024")},{name:"中式美食",img:a("5f7d")},{name:"甜點冰品",img:a("7639")},{name:"異國料理",img:a("9f40")},{name:"伴手禮",img:a("f589")},{name:"素食",img:a("4a98")}],isSearched:!1,resultList:[],totalList:[],pages:{pageSize:20,pageTotal:0,currentPage:1}}},methods:{getCity:function(){var t=this,e="https://gist.motc.gov.tw/gist_api/V3/Map/Basic/City?$format=JSON";this.$http.get(e,{headers:Object(S["a"])()}).then((function(e){t.CityList=e.data})).catch((function(t){console.log(t)}))},querySearch:function(){var t=this.$route.query.keyword;t&&(this.param.keyword=t,this.search())},searchType:function(t){this.param.type=t.name,this.search()},search:function(){var t=this,e="";this.param.keyword&&this.param.type?e="%24filter=contains(RestaurantName, '".concat(this.param.keyword,"')and contains(Class, '").concat(this.param.type,"')"):(this.param.keyword&&(e="%24filter=contains(RestaurantName, '".concat(this.param.keyword,"')")),this.param.type&&(e="%24filter=contains(Class, '".concat(this.param.type,"')")));var c="".concat("https://ptx.transportdata.tw/MOTC/v2","/Tourism/Restaurant/").concat(this.param.city,"?").concat(e,"&%24format=JSON");this.$http.get(c,{headers:Object(S["a"])()}).then((function(e){e.data.forEach((function(t){void 0===t.Picture.PictureUrl1&&(t.Picture.PictureUrl1=a("2de0"))})),t.totalList=e.data;var c=t.totalList.length;t.pages.pageTotal=Math.ceil(c/t.pages.pageSize),t.renderList(),t.isSearched=!0,t.param.keyword=null})).catch((function(t){console.log(t)}))},renderList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.resultList=[],this.pages.currentPage=c,this.totalList.forEach((function(c,i){var s=i+1;s>=e&&s<=a&&t.resultList.push(c)})),this.pages.currentPage>this.pages.pageTotal&&(this.pages.currentPage=this.pageTotal),window.scrollTo(0,0)}},watch:{$route:function(){"spots"===this.$route.name&&this.search()}},mounted:function(){this.getCity(),this.querySearch()}},N=a("6b0d"),$=a.n(N);const z=$()(P,[["render",x]]);e["default"]=z},f589:function(t,e,a){t.exports=a.p+"img/souvenir.50eb4c08.png"}}]);
//# sourceMappingURL=chunk-86511992.079ab251.js.map